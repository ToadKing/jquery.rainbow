// jquery.rainbow: Copyright 2012 Michael Lelli
// see https://github.com/ToadKing/jquery.rainbow for details
(function(d){function g(a){var c=0,b=d(a).data("rainbowSettings");d(a).find("span, img").each(function(){var a=c,f=Math.ceil(127.5*(Math.sin(b.width*a+b.redPos-b.start/(b.speed/b.timeout))+1)),e=Math.ceil(127.5*(Math.sin(b.width*a+b.greenPos-b.start/(b.speed/b.timeout))+1)),a=Math.ceil(127.5*(Math.sin(b.width*a+b.bluePos-b.start/(b.speed/b.timeout))+1));d(this).is("img")?d(this).css({backgroundColor:"rgb("+f+","+e+","+a+")"}):d(this).css({color:"rgb("+f+","+e+","+a+")"});c+=1});b.start+=1;d(a).data("rainbowSettings", b)}function h(a,c){d(a).contents().each(function(){if(3===this.nodeType){var b=this.data,a=0,f=this,e;this.data="";do e=document.createElement("span"),e.className=c.spanName,e.appendChild(document.createTextNode(b.charAt(a))),f.nextSibling?f.parentNode.insertBefore(e,f.nextSibling):f.parentNode.appendChild(e),f=e,a+=1;while(a<b.length)}else d(this).each(function(){h(this,c)})})}var i={start:0,width:Math.PI/16,speed:64*Math.PI,timeout:50,redPos:2*Math.PI/3,greenPos:0,bluePos:4*Math.PI/3,className:"rainbow", spanName:"jQueryRainbow",timer:null};d.fn.rainbow=function(a){this.each(function(){var c=d(this),b=c.data("rainbowSettings");!1===a?("object"===typeof b&&(c.removeClass(b.className),clearInterval(b.timer),"string"===typeof b.spanName&&c.find("span."+b.spanName).each(function(){d(this).replaceWith(this.childNodes)})),c.data("rainbowSettings",null)):(b&&clearInterval(b.timer),a=d.extend({},i,a||{}),a.start="random"===a.start?Math.ceil(2*(Math.random()*Math.PI)*a.speed/a.timeout):0,b||h(c[0],a),c.addClass(a.className), c.data("rainbowSettings",a),g(this),a=c.data("rainbowSettings"),a.timer=setInterval(function(){g(c[0])},a.timeout),c.data("rainbowSettings",a))})}})(window.jQuery);
