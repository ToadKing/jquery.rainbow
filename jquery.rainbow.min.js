// jquery.rainbow: Copyright 2012 Michael Lelli
// see https://github.com/ToadKing/jquery.rainbow for details
(function(d){function h(a,b,c){return"high"===a?255:"low"===a?0:Math.ceil(127.5*(Math.sin(b.width*c+a-b.start/(b.speed/b.timeout))+1))}function j(a){var b=0,c=d(a).data("rainbowSettings");d(a).find("span, img").each(function(){var a=b,f=h(c.redPos,c,a),e=h(c.greenPos,c,a),a=h(c.bluePos,c,a);d(this).is("img")?d(this).css({backgroundColor:"rgb("+f+","+e+","+a+")"}):d(this).css({color:"rgb("+f+","+e+","+a+")"});b+=1});c.start+=1;d(a).data("rainbowSettings",c)}function k(a,b){d(a).contents().each(function(){if(3=== this.nodeType){var a=this.data,g=0,f=this,e;this.data="";do e=document.createElement("span"),e.className=b.spanName,e.appendChild(document.createTextNode(a.charAt(g))),f.nextSibling?f.parentNode.insertBefore(e,f.nextSibling):f.parentNode.appendChild(e),f=e,g+=1;while(g<a.length)}else d(this).each(function(){k(this,b)})})}var l={start:0,width:Math.PI/16,speed:64*Math.PI,timeout:50,redPos:2*Math.PI/3,greenPos:0,bluePos:4*Math.PI/3,className:"rainbow",spanName:"jQueryRainbow",timer:null};d.fn.rainbow= function(a){this.each(function(){var b=d(this),c=b.data("rainbowSettings");!1===a?("object"===typeof c&&(b.removeClass(c.className),clearInterval(c.timer),"string"===typeof c.spanName&&b.find("span."+c.spanName).each(function(){d(this).replaceWith(this.childNodes)})),b.data("rainbowSettings",null)):(c&&clearInterval(c.timer),a=d.extend({},l,a||{}),a.start="random"===a.start?Math.ceil(2*(Math.random()*Math.PI)*a.speed/a.timeout):0,c||k(b[0],a),b.addClass(a.className),b.data("rainbowSettings",a),j(this), a=b.data("rainbowSettings"),a.timer=setInterval(function(){j(b[0])},a.timeout),b.data("rainbowSettings",a))})}})(window.jQuery);
