// jquery.rainbow: Copyright 2012 Michael Lelli
// see https://github.com/ToadKing/jquery.rainbow for details
(function(d){function g(a){var c=0,b=a.data("rainbowSettings");a.find("span").each(function(){var a=c,e=Math.ceil(127.5*(Math.sin(b.width*a+b.redPos-b.start/(b.speed/b.timeout))+1)),f=Math.ceil(127.5*(Math.sin(b.width*a+b.greenPos-b.start/(b.speed/b.timeout))+1)),a=Math.ceil(127.5*(Math.sin(b.width*a+b.bluePos-b.start/(b.speed/b.timeout))+1));d(this).css({color:"rgb("+e+","+f+","+a+")"});c+=1});b.start+=1;a.data("rainbowSettings",b)}function i(a,c){var b=a.data,d=0,e=a,f;a.data="";do f=document.createElement("span"), f.className=c.spanName,f.appendChild(document.createTextNode(b.charAt(d))),e.nextSibling?e.parentNode.insertBefore(f,e.nextSibling):e.parentNode.appendChild(f),e=f,d+=1;while(d<b.length);return e}function h(a,c){d(a).contents().each(function(){3===this.nodeType?i(this,c):d(this).each(function(){h(this,c)})})}var j={start:0,width:Math.PI/16,speed:64*Math.PI,timeout:50,redPos:2*Math.PI/3,greenPos:0,bluePos:4*Math.PI/3,className:"rainbow",spanName:"jQueryRainbow",timer:null};d.fn.rainbow=function(a){this.each(function(){var c= d(this),b=c.data("rainbowSettings");!1===a?("object"===typeof b&&(c.removeClass(b.className),clearInterval(b.timer),"string"===typeof b.spanName&&c.find("span."+b.spanName).each(function(){d(this).replaceWith(this.childNodes)})),c.data("rainbowSettings",null)):(b&&clearInterval(b.timer),a=d.extend({},j,a||{}),a.start="random"===a.start?Math.ceil(2*Math.random()*Math.PI*a.speed/a.timeout):0,b||h(c[0],a),c.addClass(a.className),c.data("rainbowSettings",a),g(c),a=c.data("rainbowSettings"),a.timer=setInterval(function(){g(c)}, a.timeout),c.data("rainbowSettings",a))})}})(window.jQuery);
