// jquery.rainbow: Copyright 2012 Michael Lelli
// see https://github.com/ToadKing/jquery.rainbow for details
(function(d){function h(b){var c=0,a=b.data("rainbowSettings");b.find("span").each(function(){var b=c,e=Math.ceil(127.5*(Math.sin(a.width*b+a.redPos-a.start/(a.speed/a.timeout))+1)),f=Math.ceil(127.5*(Math.sin(a.width*b+a.greenPos-a.start/(a.speed/a.timeout))+1)),b=Math.ceil(127.5*(Math.sin(a.width*b+a.bluePos-a.start/(a.speed/a.timeout))+1));d(this).css({color:"rgb("+e+","+f+","+b+")"});c+=1});a.start+=1;b.data("rainbowSettings",a)}function i(b,c){var a=b.data,d=0,e=b,f;b.data="";do f=document.createElement("span"), f.className=c.spanName,f.appendChild(document.createTextNode(a.charAt(d))),e.nextSibling?e.parentNode.insertBefore(f,e.nextSibling):e.parentNode.appendChild(f),e=f,d+=1;while(d<a.length);return e}function g(b,c){d(b).contents().each(function(){3===this.nodeType?i(this,c):d(this).each(function(){g(this,c)})})}var j={start:0,width:Math.PI/16,speed:64*Math.PI,timeout:50,redPos:2*Math.PI/3,greenPos:0,bluePos:4*Math.PI/3,className:"rainbow",spanName:"jQueryRainbow",timer:null};d.fn.rainbow=function(b){this.each(function(){var c= d(this),a=c.data("rainbowSettings");!1===b?("object"===typeof a&&(c.removeClass(a.className),clearInterval(a.timer),"string"===typeof a.spanName&&c.find("span."+a.spanName).each(function(){d(this).replaceWith(this.childNodes)})),c.data("rainbowSettings",null)):(a&&clearInterval(a.timer),b=d.extend({},j,b||{}),b.start="random"===b.start?Math.ceil(2*Math.random()*b.speed*Math.PI):0,a||g(c[0],b),b.timer=setInterval(function(){h(c)},b.timeout),c.data("rainbowSettings",b))})}})(window.jQuery);
